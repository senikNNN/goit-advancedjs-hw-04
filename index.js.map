{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgArr => {\n    return imgArr.reduce((acc, el) => {\n        return (\n            acc +\n            `\n            <li class=\"gallery-card\">\n              <a class=\"gallery-img-orig\" href=\"${el.largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n                <div class=\"img-data\">\n                 <div class=\"img-data-column img-likes\">\n                  <p class=\"img-title\">Likes</p>\n                  <p class=\"img-value\">${el.likes}</p>\n                 </div>\n                 <div class=\"img-data-column img-views\">\n                  <p class=\"img-title\">Views</p>\n                  <p class=\"img-value\">${el.views}</p>\n                 </div>\n                 <div class=\"img-data-column img-comments\">\n                  <p class=\"img-title\">Comments</p>\n                  <p class=\"img-value\">${el.comments}</p>\n                 </div>\n                  <div class=\"img-data-column img-downloads\">\n                  <p class=\"img-title\">Downloads</p>\n                  <p class=\"img-value\">${el.downloads}</p>\n                 </div>\n                </div>\n              </a>\n            </li>\n           `\n        )\n    }, '');\n};\n","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotosByQuery = (searchedQuery, page) => {\n    const requestParams = {\n        q: searchedQuery,\n        page: page,\n        key: \"47600623-616adcc60326fea30dcc03763\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n    };\n\n    return axios.get('/api/', { params: requestParams });\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\nimport { fetchPhotosByQuery } from \"./js/pixabay-api\";\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreButton = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet inputValue = '';\n\nlet simplelightbox = new SimpleLightbox('.gallery-card a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n    \n        inputValue = event.currentTarget.elements.user_query.value.trim();\n    \n        if (inputValue === '') {\n            iziToast.error({\n                message: \"Search value should not be empty!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        searchFormEl.reset();\n\n        galleryEl.innerHTML = '';\n        loadMoreButton.classList.add('is-hidden');\n        loaderEl.classList.remove('is-hidden');\n    \n        page = 1;\n\n        const response = await fetchPhotosByQuery(inputValue, page)\n         \n        loaderEl.classList.add('is-hidden');\n    \n        if (response.data.totalHits === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            galleryEl.innerHTML = '';\n            searchFormEl.reset();\n            return;\n        };\n\n        if (response.data.totalHits > 15) {\n            loadMoreButton.classList.remove('is-hidden');\n            loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n        }\n\n        galleryEl.innerHTML = createGalleryCardTemplate(response.data.hits);\n        smoothScroll();\n        simplelightbox.refresh();\n    } catch (err) {\n        console.log(err)\n    }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreButtonClick = async event => {\n    try {\n        loadMoreButton.classList.add('is-hidden');\n        loaderEl.classList.remove('is-hidden');\n\n        page++;\n        const response = await fetchPhotosByQuery(inputValue, page);\n\n        loaderEl.classList.add('is-hidden');\n        loadMoreButton.classList.remove('is-hidden');\n\n        galleryEl.insertAdjacentHTML('beforeend', createGalleryCardTemplate(response.data.hits));\n        smoothScroll();\n        simplelightbox.refresh();\n\n        if (response.data.totalHits <= page*15) {\n            loadMoreButton.classList.add('is-hidden');\n            loadMoreButton.removeEventListener('click', onLoadMoreButtonClick);\n\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nfunction smoothScroll() {\n    const galleryCardEl = document.querySelector('.gallery-card')\n    const rect = galleryCardEl.getBoundingClientRect();\n    for (const key in rect) {\n      if (typeof rect[key] !== \"function\") {\n        let para = document.createElement(\"p\");\n        para.textContent = `${key} : ${rect[key]}`;\n        document.body.appendChild(para);\n      }\n    };\n\n    const cardHeight = rect.height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n};\n"],"names":["createGalleryCardTemplate","imgArr","acc","el","axios","fetchPhotosByQuery","searchedQuery","page","requestParams","searchFormEl","galleryEl","loaderEl","loadMoreButton","inputValue","simplelightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","response","onLoadMoreButtonClick","smoothScroll","err","rect","key","para","cardHeight"],"mappings":"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"}